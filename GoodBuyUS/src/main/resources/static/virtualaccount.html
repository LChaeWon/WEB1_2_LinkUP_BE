<!DOCTYPE html>
<html lang="ko">
<head>
    <title>결제하기</title>
    <meta charset="utf-8">
</head>
<body>
<section>
    <h1>결제 페이지</h1>
    <span>총 주문금액: <b>3000 원</b></span>
    <button id="payment-button">3000원 가상계좌 결제하기</button>
</section>
<script>
    const button = document.getElementById('payment-button'); // 결제 버튼

    button.addEventListener('click', async function () {
        try {
            // 서버로 가상계좌 생성 및 결제 요청
            const response = await fetch('/api/v1/virtual-accounts', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    orderId: 'a9CWyCY5m89PNh2xwhn7-XQKDH2SQWXAK9', // 명시적으로 고유한 값 사
                    amount: 3000,
                    orderName: '테스트 상품',
                    customerName: '홍길동',
                    bank: '신한'
                })
            });

            if (!response.ok) {
                throw new Error('결제 요청 실패');
            }

            const data = await response.json();
            console.log('결제 요청 성공:', data);
            alert('결제가 성공적으로 요청되었습니다. 가상계좌 정보를 확인하세요.');

        } catch (error) {
            console.error('결제 요청 중 오류:', error);
            alert('결제 요청 중 오류가 발생했습니다: ' + error.message);
        }
    });
</script>
</body>
</html>
